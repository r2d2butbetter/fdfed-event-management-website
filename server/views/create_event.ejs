<!-- <style>
.wide-form {
  width: 700px;
}
</style>

<div class="form-container wide-form">
  <form method="POST" action="/organizer/events" class="full-width-form">

    <h1 style="text-align: center;">Create Event</h1>

    <div class="form-group">
      <div class="form-group">
        <label for="category">Category</label>
        <select class="form-control" id="category" name="category" required>
          <option>Concerts</option>
          <option>Exhibitions</option>
          <option>TEDx</option>
          <option>Health Camps</option>
        </select>
      </div>
      <label for="title">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        name="title"
        placeholder="Enter event title"
        maxlength="100"
        required
      />
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        placeholder="Enter event description"
        maxlength="1000"
        required
      ></textarea>
    </div>
    <div class="form-group">
      <label for="startDateTime">Start Date Time</label>
      <input
        type="datetime-local"
        class="form-control"
        id="startDate"
        name="startDateTime"
        required
      />
    </div>
    <div class="form-group">
      <label for="endDateTime">End Date Time</label>
      <input
        type="datetime-local"
        class="form-control"
        id="endDate"
        name="endDateTime"
        required
      />
    </div>
    <div class="form-group">
      <label for="venue">Venue</label>
      <input
        type="text"
        class="form-control"
        id="venue"
        name="venue"
        placeholder="Enter event venue"
        maxlength="200"
        required
      />
    </div>
    <div class="form-group">
      <label for="capacity">Capacity</label>
      <input
        type="number"
        class="form-control"
        id="capacity"
        name="capacity"
        placeholder="Enter event capacity"
        min="1"
        max="100000"
        required
      />
    </div>
    <div class="form-group">
      <label for="price">Price</label>
      <input
        type="number"
        class="form-control"
        id="price"
        name="price"
        placeholder="Enter event price"
        min="0"
        step="0.01"
        required
      />
    </div>
    <div class="form-group">
      <label for="status">Status</label>
      <select class="form-control" id="status" name="status" required>
        <option value="start_selling">Start Selling</option>
        <option value="not_selling">Not Selling</option>
      </select>
    </div>
    <br />
    <button type="submit" class="submit-btn form-submit-btn">Submit</button>
  </form>
</div> -->

<style>
  .wide-form {
    width: 700px;
  }
</style>

<div class="form-container wide-form">
  <form method="POST"
    action="<%= typeof event !== 'undefined' && event ? '/organizer/events/' + event._id + '?_method=PUT' : '/organizer/events' %>"
    enctype="multipart/form-data" class="full-width-form" <%=typeof event !=='undefined' && event ? 'data-edit="true"'
    : '' %>>
    <h1 style="text-align: center;">
      <%= typeof event !=='undefined' && event ? 'Edit Event' : 'Create Event' %>
    </h1>

    <div class="form-group">
      <label for="category">Category</label>
      <select class="form-control" id="category" name="category">
        <option <%=typeof event !=='undefined' && event && event.category==='Concerts' ? 'selected' : '' %>>Concerts
        </option>
        <option <%=typeof event !=='undefined' && event && event.category==='Exhibitions' ? 'selected' : '' %>
          >Exhibitions</option>
        <option <%=typeof event !=='undefined' && event && event.category==='TEDx' ? 'selected' : '' %>>TEDx</option>
        <option <%=typeof event !=='undefined' && event && event.category==='Health Camps' ? 'selected' : '' %>>Health
          Camps</option>
      </select>
    </div>

    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" id="title" name="title" placeholder="Enter event title"
        value="<%= typeof event !== 'undefined' && event ? event.title : '' %>" />
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea class="form-control" id="description" name="description"
        placeholder="Enter event description"><%= typeof event !== 'undefined' && event ? event.description : '' %></textarea>
    </div>

    <div class="form-group">
      <label for="startDateTime">Start Date Time</label>
      <input type="datetime-local" class="form-control" id="startDateTime" name="startDateTime"
        value="<%= typeof event !== 'undefined' && event ? event.startDateTime.toISOString().slice(0, 16) : '' %>" />
    </div>

    <div class="form-group">
      <label for="endDateTime">End Date Time</label>
      <input type="datetime-local" class="form-control" id="endDateTime" name="endDateTime"
        value="<%= typeof event !== 'undefined' && event ? event.endDateTime.toISOString().slice(0, 16) : '' %>" />
      <small id="endDateError" style="color: red; display: none;">
        End Date Time must be later than Start Date Time.
      </small>
    </div>

    <div class="form-group">
      <label for="venue">Venue</label>
      <input type="text" class="form-control" id="venue" name="venue" placeholder="Enter event venue"
        value="<%= typeof event !== 'undefined' && event ? event.venue : '' %>" />
    </div>

    <div class="form-group">
      <label for="capacity">Capacity</label>
      <input type="number" class="form-control" id="capacity" name="capacity" placeholder="Enter event capacity"
        value="<%= typeof event !== 'undefined' && event ? event.capacity : '' %>" />
    </div>

    <div class="form-group">
      <label for="price">Price</label>
      <input type="number" class="form-control" id="price" name="price" placeholder="Enter event price"
        value="<%= typeof event !== 'undefined' && event ? event.ticketPrice : '' %>" />
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select class="form-control" id="status" name="status">
        <option value="start_selling" <%=typeof event !=='undefined' && event && event.status==='start_selling'
          ? 'selected' : '' %>>Start Selling</option>
        <option value="not_selling" <%=typeof event !=='undefined' && event && event.status==='not_selling' ? 'selected'
          : '' %>>Not Selling</option>
      </select>
    </div>

    <div class="form-group">
      <label for="image">Event Image</label>
      <input type="file" class="form-control" id="image" name="image" <%=typeof event !=='undefined' && event ? ''
        : 'required' %>
      />
      <% if (typeof event !=='undefined' && event && event.image) { %>
        <div class="current-image mt-2">
          <p>Current image: <span class="image-name">
              <%= event.image.split('/').pop() %>
            </span></p>
          <small class="text-muted">Upload a new image only if you want to change it</small>
        </div>
        <% } %>
    </div>

    <br />
    <button type="submit" class="submit-btn form-submit-btn">Submit</button>
    <script src="/js/validation-utils.js"></script>
    <script src="/js/event-validation.js"></script>
  </form>
</div>